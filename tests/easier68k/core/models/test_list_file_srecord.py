"""
Tests for loading s records
"""

import pytest
import json

from easier68k.core.models.list_file import ListFile

file_path = 'easier68k/core/models/test.S68'

example = '''{"data": {"12288": "00000001000000020000000300000004000000050000000600000007000000088", "12320": "000000090000000A0000000B0000000C0000000D0000000E0000000F000000102", "12544": "00000001000000020000000300000004000000050000000600000007000000088", "12576": "000000090000000A0000000B0000000C0000000D0000000E0000000F000000102", "12800": "00000000000000000000000000000000B", "4096": "78007A007C007E006000002278005846BC7C00106C000006600000127C0058450", "4128": "BA7C00106C00004A60000002B87C001049F83000D8C43405C4FC0004D8C24BF82", "4160": "3100DAC6343C007BC4FC0004DAFC00AF4DF83200DCC63405C4FC0004DCC224149", "4192": "2615C7C22416D6822C835844584760BCFFFF2", "4208": "FFFF7"}, "startingExecutionAddress": 4096, "symbols": {}}'''

def test_srecord():
    """
    Test the S record file loading
    :return:
    """
    lf = ListFile()

    lf.read_s_record_filename(file_path)

    output = ListFile()
    output.load_from_json(example)

    assert lf == output